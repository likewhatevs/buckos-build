load("//defs:package_defs.bzl", "cmake_package")

cmake_package(
    name = "nccl",
    version = "2.28.3",
    src_uri = "https://github.com/NVIDIA/nccl/archive/refs/tags/v2.28.3-1.tar.gz",
    sha256 = "888b305a79954b67022cfdd91aec515e88c9fed7ddbd2fb96af4ee3295853bb0",
    cmake_args = [
        "-DCMAKE_BUILD_TYPE=Release",
        "-DBUILD_SHARED_LIBS=ON",
        "-DCMAKE_CUDA_ARCHITECTURES=70;75;80;86;89;90",
    ],
    visibility = ["PUBLIC"],
)
