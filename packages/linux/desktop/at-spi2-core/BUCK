load("//defs:package.bzl", "package")

# at-spi2-core - Assistive Technology Service Provider Interface
# Provides atk-bridge-2.0 for GTK accessibility
package(
    build_rule = "meson",
    name = "at-spi2-core",
    version = "2.52.0",
    url = "https://download.gnome.org/sources/at-spi2-core/2.52/at-spi2-core-2.52.0.tar.xz",
    sha256 = "0ac3fc8320c8d01fa147c272ba7fa03806389c6b03d3c406d0823e30e35ff5ab",
    description = "Assistive Technology Service Provider Interface",
    homepage = "https://gitlab.gnome.org/GNOME/at-spi2-core",
    license = "LGPL-2.1+",
    configure_args = [
        "-Dintrospection=disabled",
        "-Ddocs=false",
        "-Dx11=enabled",
        "-Dsystemd_user_dir=/tmp",
    ],
    deps = [
        "//packages/linux/dev-libs/glib:glib",
        "//packages/linux/system/libs/utility/pcre2:pcre2",
        "//packages/linux/system/libs/utility/libffi:libffi",
        "//packages/linux/core/zlib:zlib",
        # Note: at-spi2-core >= 2.46 includes atk, so no separate atk dependency
        "//packages/linux/system/libs/ipc/dbus:dbus",
        "//packages/linux/system/init/systemd:systemd",
        "//packages/linux/system/security/capabilities:libcap",
        "//packages/linux/graphics/xorg/libX11:libX11",
        "//packages/linux/graphics/xorg/libXext:libXext",
        "//packages/linux/graphics/xorg/libXi:libXi",
        "//packages/linux/graphics/xorg/libXfixes:libXfixes",
        "//packages/linux/graphics/xorg/libXtst:libXtst",
        "//packages/linux/graphics/xorg/xorgproto:xorgproto",
        "//packages/linux/graphics/xorg/libxcb:libxcb",
        "//packages/linux/graphics/xorg/libXau:libXau",
        "//packages/linux/graphics/xorg/libXdmcp:libXdmcp",
        "//packages/linux/system/libs/data/libxml2:libxml2",
    ],
)
