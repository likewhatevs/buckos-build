load("//defs:package_defs.bzl", "cmake_package")

cmake_package(
    name = "polyscope",
    version = "2.5.0",
    src_uri = "https://github.com/nmwsharp/polyscope/archive/refs/tags/v2.5.0.tar.gz",
    sha256 = "419a1eaa204dedc29ef67bff05c0a387c9c859ec4fe55fdba63390dac353fd4f",
    description = "A C++ viewer and user interface for 3D data like meshes and point clouds",
    homepage = "https://polyscope.run/",
    license = "MIT",
    deps = [
        "//packages/linux/dev-libs/math/glm:glm",
        "//packages/linux/dev-libs/misc/happly:happly",
        "//packages/linux/graphics/rendering/imgui:imgui",
        "//packages/linux/graphics/rendering/implot:implot",
        "//packages/linux/dev-libs/json/nlohmann-json:nlohmann-json",
        "//packages/linux/dev-libs/misc/stb:stb",
        "//packages/linux/dev-libs/glew:glew",
        "//packages/linux/graphics/rendering/glfw:glfw",
    ],
    cmake_args = [
        "-DCMAKE_BUILD_TYPE=Release",
        "-DBUILD_SHARED_LIBS=ON",
        "-DPOLYSCOPE_BACKEND_OPENGL3_GLFW=ON",
        "-DPOLYSCOPE_BACKEND_OPENGL_MOCK=ON",
        "-DPOLYSCOPE_BACKEND_OPENGL3_EGL=OFF",
    ],
    visibility = ["PUBLIC"],
)
