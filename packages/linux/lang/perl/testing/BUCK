load("//defs:package_defs.bzl", "download_source", "autotools_package")
load("//defs:use_flags.bzl", "set_use_flags", "use_dep")

# Test::Simple - Basic utilities for writing tests
download_source(
    name = "test-simple-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/EX/EXODIST/Test-Simple-1.302199.tar.gz",
    sha256 = "7b4b03cee7f9e928fe10e8a3efef02b2a286f0877979694b2a9ef99250bd8c5c",
    signature_required = False,
)

autotools_package(
    name = "test-simple",
    source = ":test-simple-src",
    version = "1.302199",
    description = "Basic utilities for writing tests",
    homepage = "https://metacpan.org/pod/Test::Simple",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Deep - Extremely flexible deep comparison
download_source(
    name = "test-deep-src",
    src_uri = "https://cpan.metacpan.org/authors/id/R/RJ/RJBS/Test-Deep-1.204.tar.gz",
    sha256 = "b6591f6ccdd853c7efc9ff3c5756370403211cffe46047f082b1cd1611a84e5f",
    signature_required = False,
)

autotools_package(
    name = "test-deep",
    source = ":test-deep-src",
    version = "1.204",
    description = "Extremely flexible deep comparison",
    homepage = "https://metacpan.org/pod/Test::Deep",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Exception - Test exception-based code
download_source(
    name = "test-exception-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/EX/EXODIST/Test-Exception-0.43.tar.gz",
    sha256 = "156b13f07764f766d8b45a43728f2439af81a3512625438deab783b7883eb533",
    signature_required = False,
)

autotools_package(
    name = "test-exception",
    source = ":test-exception-src",
    version = "0.43",
    description = "Test exception-based code",
    homepage = "https://metacpan.org/pod/Test::Exception",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
    ],
    visibility = ["PUBLIC"],
)

# Test::Warn - Perl extension to test methods for warnings
download_source(
    name = "test-warn-src",
    src_uri = "https://cpan.metacpan.org/authors/id/B/BI/BIGJ/Test-Warn-0.37.tar.gz",
    sha256 = "98ca32e7f2f5ea89b8bfb9a0609977f3d153e242e2e51705126cb954f1a06b57",
    signature_required = False,
)

autotools_package(
    name = "test-warn",
    source = ":test-warn-src",
    version = "0.37",
    description = "Perl extension to test methods for warnings",
    homepage = "https://metacpan.org/pod/Test::Warn",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
    ],
    visibility = ["PUBLIC"],
)

# Test::MockObject - Perl extension for emulating troublesome interfaces
download_source(
    name = "test-mockobject-src",
    src_uri = "https://cpan.metacpan.org/authors/id/C/CH/CHROMATIC/Test-MockObject-1.20200122.tar.gz",
    sha256 = "2b7f80da87f5a6fe0360d9ee521051053017442c3a26e85db68dfac9f8307623",
    signature_required = False,
)

autotools_package(
    name = "test-mockobject",
    source = ":test-mockobject-src",
    version = "1.20200122",
    description = "Perl extension for emulating troublesome interfaces",
    homepage = "https://metacpan.org/pod/Test::MockObject",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
    ],
    visibility = ["PUBLIC"],
)

# Test::Mock::Time - Deterministic time & timers for event loops
download_source(
    name = "test-mock-time-src",
    src_uri = "https://cpan.metacpan.org/authors/id/P/PO/POWERMAN/Test-Mock-Time-v0.1.0.tar.gz",
    sha256 = "48283ae04ea63e83cf9b35c713d6c249c832f17927fbf8427d43c6631d32e0be",
    signature_required = False,
)

autotools_package(
    name = "test-mock-time",
    source = ":test-mock-time-src",
    version = "0.1.0",
    description = "Deterministic time & timers for event loops",
    homepage = "https://metacpan.org/pod/Test::Mock::Time",
    license = "MIT",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::NoWarnings - Make sure you didn't emit any warnings
download_source(
    name = "test-nowarnings-src",
    src_uri = "https://cpan.metacpan.org/authors/id/A/AD/ADAMK/Test-NoWarnings-1.04.tar.gz",
    sha256 = "638a57658cb119af1fe5b15e73d47c2544dcfef84af0c6b1b2e97f08202b686c",
    signature_required = False,
)

autotools_package(
    name = "test-nowarnings",
    source = ":test-nowarnings-src",
    version = "1.04",
    description = "Make sure you didn't emit any warnings while testing",
    homepage = "https://metacpan.org/pod/Test::NoWarnings",
    license = "LGPL-2.1-only",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
    ],
    visibility = ["PUBLIC"],
)

# Test::Differences - Test strings and data structures for differences
download_source(
    name = "test-differences-src",
    src_uri = "https://cpan.metacpan.org/authors/id/D/DC/DCANTRELL/Test-Differences-0.71.tar.gz",
    sha256 = "cac16a56cd843b0809e5b49199d60d75a8dbad7ca9a08380dbf3f5cc3aaa38d9",
    signature_required = False,
)

autotools_package(
    name = "test-differences",
    source = ":test-differences-src",
    version = "0.71",
    description = "Test strings and data structures and show differences",
    homepage = "https://metacpan.org/pod/Test::Differences",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
        "//packages/linux/lang/perl/text:text-diff",
    ],
    visibility = ["PUBLIC"],
)

# Test::Most - Most commonly needed test functions and features
download_source(
    name = "test-most-src",
    src_uri = "https://cpan.metacpan.org/authors/id/O/OV/OVID/Test-Most-0.38.tar.gz",
    sha256 = "089eb894f7bace4c37c6334e0e290eb20338ee10223af0c82cbe7281c78382df",
    signature_required = False,
)

autotools_package(
    name = "test-most",
    source = ":test-most-src",
    version = "0.38",
    description = "Most commonly needed test functions and features",
    homepage = "https://metacpan.org/pod/Test::Most",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
        ":test-deep",
        ":test-differences",
        ":test-exception",
        ":test-warn",
    ],
    visibility = ["PUBLIC"],
)

# Test::Fatal - Incredibly simple helpers for testing code with exceptions
download_source(
    name = "test-fatal-src",
    src_uri = "https://cpan.metacpan.org/authors/id/R/RJ/RJBS/Test-Fatal-0.017.tar.gz",
    sha256 = "37dfffdafb84b762efe96b02fb2aa41f37026c73e6b83590db76229697f3c4a6",
    signature_required = False,
)

autotools_package(
    name = "test-fatal",
    source = ":test-fatal-src",
    version = "0.017",
    description = "Incredibly simple helpers for testing code with exceptions",
    homepage = "https://metacpan.org/pod/Test::Fatal",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        "//packages/linux/lang/perl/core:try-tiny",
    ],
    visibility = ["PUBLIC"],
)

# Test::Requires - Checks to see if the module can be loaded
download_source(
    name = "test-requires-src",
    src_uri = "https://cpan.metacpan.org/authors/id/T/TO/TOKUHIROM/Test-Requires-0.11.tar.gz",
    sha256 = "4b88de549597eecddf7c3c38a4d0204a16f59ad804577b671896ac04e24e040f",
    signature_required = False,
)

autotools_package(
    name = "test-requires",
    source = ":test-requires-src",
    version = "0.11",
    description = "Checks to see if the module can be loaded",
    homepage = "https://metacpan.org/pod/Test::Requires",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Output - Utilities to test STDOUT and STDERR messages
download_source(
    name = "test-output-src",
    src_uri = "https://cpan.metacpan.org/authors/id/B/BD/BDFOY/Test-Output-1.033.tar.gz",
    sha256 = "f6a8482740b075fad22aaf4d987d38ef927c6d2b452d4ae0d0bd8f779830556e",
    signature_required = False,
)

autotools_package(
    name = "test-output",
    source = ":test-output-src",
    version = "1.033",
    description = "Utilities to test STDOUT and STDERR messages",
    homepage = "https://metacpan.org/pod/Test::Output",
    license = "Artistic-2.0",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Pod - Check for POD errors in files
download_source(
    name = "test-pod-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/ET/ETHER/Test-Pod-1.52.tar.gz",
    sha256 = "60a8dbcc60168bf1daa5cc2350236df9343e9878f4ab9830970a5dde6fe8e5fc",
    signature_required = False,
)

autotools_package(
    name = "test-pod",
    source = ":test-pod-src",
    version = "1.52",
    description = "Check for POD errors in files",
    homepage = "https://metacpan.org/pod/Test::Pod",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Pod::Coverage - Check for pod coverage in your distribution
download_source(
    name = "test-pod-coverage-src",
    src_uri = "https://cpan.metacpan.org/authors/id/N/NE/NEILB/Test-Pod-Coverage-1.10.tar.gz",
    sha256 = "48c9cca9f7d99eee741176445b431adf09c029e1aa57c4703c9f46f7601d40d4",
    signature_required = False,
)

autotools_package(
    name = "test-pod-coverage",
    source = ":test-pod-coverage-src",
    version = "1.10",
    description = "Check for pod coverage in your distribution",
    homepage = "https://metacpan.org/pod/Test::Pod::Coverage",
    license = "Artistic-2.0",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-pod",
    ],
    visibility = ["PUBLIC"],
)

# Devel::Cover - Code coverage metrics for Perl
download_source(
    name = "devel-cover-src",
    src_uri = "https://cpan.metacpan.org/authors/id/P/PJ/PJCJ/Devel-Cover-1.44.tar.gz",
    sha256 = "f40c1543992e5d65a6f78003d462d59acd79ae6d30d38047b1c69d999d2b1fd8",
    signature_required = False,
)

autotools_package(
    name = "devel-cover",
    source = ":devel-cover-src",
    version = "1.44",
    description = "Code coverage metrics for Perl",
    homepage = "https://metacpan.org/pod/Devel::Cover",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)
