load("@root//defs:package_defs.bzl", "download_source", "autotools_package")
load("@root//defs:use_flags.bzl", "set_use_flags", "use_dep")

# Moose - A postmodern object system for Perl 5
download_source(
    name = "moose-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/ET/ETHER/Moose-2.2207.tar.gz",
    sha256 = "7c2daddc49754ded93f65b8ce9e3ac9b6d11ab27d111ec77f95a8528cf4ac409",
    signature_required = False,
)

autotools_package(
    name = "moose",
    source = ":moose-src",
    version = "2.2207",
    description = "A postmodern object system for Perl 5",
    homepage = "https://metacpan.org/pod/Moose",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        "//packages/linux/lang/perl/core:try-tiny",
        "//packages/linux/lang/perl/core:package-stash",
        "//packages/linux/lang/perl/core:module-runtime",
        "//packages/linux/lang/perl/core:class-accessor",
        ":class-load",
        ":data-visitor",
        ":eval-closure",
    ],
    visibility = ["PUBLIC"],
)

# Moo - Minimalist Object Orientation (with Moose compatibility)
download_source(
    name = "moo-src",
    src_uri = "https://cpan.metacpan.org/authors/id/H/HA/HAARG/Moo-2.005005.tar.gz",
    sha256 = "fb5a2952649faed07373f220b78004a9c6aba387739133740c1770e9b1f4b108",
    signature_required = False,
)

autotools_package(
    name = "moo",
    source = ":moo-src",
    version = "2.005005",
    description = "Minimalist Object Orientation (with Moose compatibility)",
    homepage = "https://metacpan.org/pod/Moo",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        "//packages/linux/lang/perl/core:module-runtime",
        "//packages/linux/lang/perl/core:import-into",
        ":role-tiny",
        ":class-method-modifiers",
        ":sub-quote",
    ],
    visibility = ["PUBLIC"],
)

# Mouse - Moose minus the antlers
download_source(
    name = "mouse-src",
    src_uri = "https://cpan.metacpan.org/authors/id/S/SK/SKAJI/Mouse-v2.5.10.tar.gz",
    sha256 = "ce8dc23946153a467ff09765167ee2590f5c502120f48a2d9441733f39aa32ee",
    signature_required = False,
)

autotools_package(
    name = "mouse",
    source = ":mouse-src",
    version = "2.5.10",
    description = "Moose minus the antlers",
    homepage = "https://metacpan.org/pod/Mouse",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Role::Tiny - Roles: a lightweight alternative to Moose roles
download_source(
    name = "role-tiny-src",
    src_uri = "https://cpan.metacpan.org/authors/id/H/HA/HAARG/Role-Tiny-2.002004.tar.gz",
    sha256 = "d7bdee9e138a4f83aa52d0a981625644bda87ff16642dfa845dcb44d9a242b45",
    signature_required = False,
)

autotools_package(
    name = "role-tiny",
    source = ":role-tiny-src",
    version = "2.002004",
    description = "Roles: a lightweight alternative to Moose roles",
    homepage = "https://metacpan.org/pod/Role::Tiny",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Class::Method::Modifiers - Provides Moose-like method modifiers
download_source(
    name = "class-method-modifiers-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/ET/ETHER/Class-Method-Modifiers-2.15.tar.gz",
    sha256 = "65cd85bfe475d066e9186f7a8cc636070985b30b0ebb1cde8681cf062c2e15fc",
    signature_required = False,
)

autotools_package(
    name = "class-method-modifiers",
    source = ":class-method-modifiers-src",
    version = "2.15",
    description = "Provides Moose-like method modifiers",
    homepage = "https://metacpan.org/pod/Class::Method::Modifiers",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Sub::Quote - Efficient generation of subroutines via string eval
download_source(
    name = "sub-quote-src",
    src_uri = "https://cpan.metacpan.org/authors/id/H/HA/HAARG/Sub-Quote-2.006008.tar.gz",
    sha256 = "94bebd500af55762e83ea2f2bc594d87af828072370c7110c60c238a800d15b2",
    signature_required = False,
)

autotools_package(
    name = "sub-quote",
    source = ":sub-quote-src",
    version = "2.006008",
    description = "Efficient generation of subroutines via string eval",
    homepage = "https://metacpan.org/pod/Sub::Quote",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Class::Load - A working (require Class::Name) and target
download_source(
    name = "class-load-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/ET/ETHER/Class-Load-0.25.tar.gz",
    sha256 = "2a48fa779b5297e56156380e8b32637c6c58decb4f4a7f3c7350523e11275f8f",
    signature_required = False,
)

autotools_package(
    name = "class-load",
    source = ":class-load-src",
    version = "0.25",
    description = "A working (require Class::Name) and target",
    homepage = "https://metacpan.org/pod/Class::Load",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        "//packages/linux/lang/perl/core:module-runtime",
        "//packages/linux/lang/perl/core:try-tiny",
    ],
    visibility = ["PUBLIC"],
)

# Data::Visitor - Visitor style traversal of Perl data structures
download_source(
    name = "data-visitor-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/ET/ETHER/Data-Visitor-0.32.tar.gz",
    sha256 = "b194290f257cc6275a039374111554c666a1650e4c01ad799c1e0a277f47917d",
    signature_required = False,
)

autotools_package(
    name = "data-visitor",
    source = ":data-visitor-src",
    version = "0.32",
    description = "Visitor style traversal of Perl data structures",
    homepage = "https://metacpan.org/pod/Data::Visitor",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        "//packages/linux/lang/perl/core:namespace-clean",
    ],
    visibility = ["PUBLIC"],
)

# Eval::Closure - Safely and cleanly create closures via string eval
download_source(
    name = "eval-closure-src",
    src_uri = "https://cpan.metacpan.org/authors/id/D/DO/DOY/Eval-Closure-0.14.tar.gz",
    sha256 = "ea0944f2f5ec98d895bef6d503e6e4a376fea6383a6bc64c7670d46ff2218cad",
    signature_required = False,
)

autotools_package(
    name = "eval-closure",
    source = ":eval-closure-src",
    version = "0.14",
    description = "Safely and cleanly create closures via string eval",
    homepage = "https://metacpan.org/pod/Eval::Closure",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        "//packages/linux/lang/perl/core:try-tiny",
    ],
    visibility = ["PUBLIC"],
)

# MooseX::Types - Organise your Moose types in libraries
download_source(
    name = "moosex-types-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/ET/ETHER/MooseX-Types-0.50.tar.gz",
    sha256 = "9cd87b3492cbf0be9d2df9317b2adf9fc30663770e69906654bea3f41b17cb08",
    signature_required = False,
)

autotools_package(
    name = "moosex-types",
    source = ":moosex-types-src",
    version = "0.50",
    description = "Organise your Moose types in libraries",
    homepage = "https://metacpan.org/pod/MooseX::Types",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":moose",
    ],
    visibility = ["PUBLIC"],
)

# MooseX::Role::Parameterized - Moose roles with parameters
download_source(
    name = "moosex-role-parameterized-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/ET/ETHER/MooseX-Role-Parameterized-1.11.tar.gz",
    sha256 = "1cfe766c5d7f0ecab57f733dcca430a2a2acd6b995757141b940ade3692bec9e",
    signature_required = False,
)

autotools_package(
    name = "moosex-role-parameterized",
    source = ":moosex-role-parameterized-src",
    version = "1.11",
    description = "Moose roles with parameters",
    homepage = "https://metacpan.org/pod/MooseX::Role::Parameterized",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":moose",
    ],
    visibility = ["PUBLIC"],
)

# Type::Tiny - Tiny, yet Moo(se)-compatible type constraint
download_source(
    name = "type-tiny-src",
    src_uri = "https://cpan.metacpan.org/authors/id/T/TO/TOBYINK/Type-Tiny-2.004000.tar.gz",
    sha256 = "697e7f775edfc85f4cf07792d04fd19b09c25285f98f5938e8efc4f74507a128",
    signature_required = False,
)

autotools_package(
    name = "type-tiny",
    source = ":type-tiny-src",
    version = "2.004000",
    description = "Tiny, yet Moo(se)-compatible type constraint",
    homepage = "https://metacpan.org/pod/Type::Tiny",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        "//packages/linux/lang/perl/core:exporter-tiny",
    ],
    visibility = ["PUBLIC"],
)

# Object::Pad - A simple object system with type constraints
download_source(
    name = "object-pad-src",
    src_uri = "https://cpan.metacpan.org/authors/id/P/PE/PEVANS/Object-Pad-0.809.tar.gz",
    sha256 = "12950a664c0607ea3fca7480f365df54d1746291f45ebb0ed80917b74fb15ef5",
    signature_required = False,
)

autotools_package(
    name = "object-pad",
    source = ":object-pad-src",
    version = "0.809",
    description = "A simple object system with type constraints",
    homepage = "https://metacpan.org/pod/Object::Pad",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Class::Tiny - Minimalist class construction
download_source(
    name = "class-tiny-src",
    src_uri = "https://cpan.metacpan.org/authors/id/D/DA/DAGOLDEN/Class-Tiny-1.008.tar.gz",
    sha256 = "ee058a63912fa1fcb9a72498f56ca421a2056dc7f9f4b67837446d6421815615",
    signature_required = False,
)

autotools_package(
    name = "class-tiny",
    source = ":class-tiny-src",
    version = "1.008",
    description = "Minimalist class construction",
    homepage = "https://metacpan.org/pod/Class::Tiny",
    license = "Apache-2.0",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor
    """,
    src_configure = "",
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)
