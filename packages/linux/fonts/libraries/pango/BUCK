load("//defs:package.bzl", "package")

package(
    build_rule = "meson",
    name = "pango",
    version = "1.52.2",
    url = "https://download.gnome.org/sources/pango/1.52/pango-1.52.2.tar.xz",
    sha256 = "d0076afe01082814b853deec99f9349ece5f2ce83908b8e58ff736b41f78a96b",
    description = "Library for layout and rendering of text",
    homepage = "https://pango.gnome.org/",
    license = "LGPL-2.0-or-later",
    configure_args = [
        "--wrap-mode=nofallback",
        "-Dintrospection=disabled",
        "-Dxft=disabled",
        "-Dgtk_doc=false",
        "-Dinstall-tests=false",
        "-Dlibthai=disabled",
        "-Dsysprof=disabled",
        # Enable cairo for pangocairo (required by GTK)
        "-Dcairo=enabled",
    ],
    deps = [
        "//packages/linux/dev-libs/glib:glib",
        "//packages/linux/system/libs/utility/pcre2:pcre2",
        "//packages/linux/system/libs/utility/libffi:libffi",
        "//packages/linux/core/zlib:zlib",
        # cairo for pangocairo
        "//packages/linux/system/libs/graphics/cairo:cairo",
        # harfbuzz/fontconfig/cairo transitive deps needed for pkg-config
        "//packages/linux/system/libs/data/expat:expat",
        "//packages/linux/system/libs/image/libpng:libpng",
        "//packages/linux/system/libs/compression/brotli:brotli",
        "//packages/linux/system/libs/compression/bzip2:bzip2",
        "//packages/linux/system/security/auth/biometric:pixman",
        "//packages/linux/system/libs/font/fribidi:fribidi",
        "//packages/linux/system/libs/font/freetype:freetype",
        "//packages/linux/system/libs/font/fontconfig:fontconfig",
        "//packages/linux/system/libs/font/harfbuzz:harfbuzz",
        # X11/xcb transitive deps needed by cairo.pc Requires.private
        "//packages/linux/graphics/xorg/libX11:libX11",
        "//packages/linux/graphics/xorg/libXext:libXext",
        "//packages/linux/graphics/xorg/libXrender:libXrender",
        "//packages/linux/graphics/xorg/xorgproto:xorgproto",
        "//packages/linux/graphics/xorg/libxcb:libxcb",
        "//packages/linux/graphics/xorg/libXau:libXau",
        "//packages/linux/graphics/xorg/libXdmcp:libXdmcp",
    ],
    visibility = ["PUBLIC"],
)
