load("//defs:package.bzl", "package")

# Kaldi is a speech recognition toolkit using a custom configure script.
# It requires special handling for the build process (cd src && ./configure && make).
package(
    build_rule = "autotools",
    name = "kaldi",
    version = "01aadd7",
    url = "https://github.com/kaldi-asr/kaldi/archive/01aadd7c19372e3eacadec88caabd86162f33d69.tar.gz",
    sha256 = "b7f6789806e5d8015bfaa1940cebfc5ed59251988f31dd162e2c4382ec523829",
    configure_args = [
        "--shared",
        "--mathlib=OPENBLAS",
    ],
    deps = [
        "//packages/linux/audio/libraries/openfst-kaldi:openfst-kaldi",
        "//packages/linux/dev-libs/math/openblas:openblas",
        "//packages/linux/dev-libs/math/lapack:lapack",
    ],
)
