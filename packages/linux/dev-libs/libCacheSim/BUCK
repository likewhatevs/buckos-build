load("@root//defs:package_defs.bzl", "cmake_package")

cmake_package(
    name = "libCacheSim",
    version = "0.1.0",
    src_uri = "https://github.com/1a1a11a/libCacheSim/archive/refs/heads/develop.tar.gz",
    sha256 = "60a31427020eeb4f87672a53d2bb7a7805a188460aa60477a2ea8e9f6a9d88fd",
    cmake_args = [
        "-DENABLE_TESTS=OFF",
        "-DUSE_HUGEPAGE=ON",
        "-DSUPPORT_TTL=OFF",
        "-DOPT_SUPPORT_ZSTD_TRACE=ON",
        "-DENABLE_GLCACHE=OFF",
        "-DENABLE_LRB=OFF",
        "-DENABLE_3L_CACHE=OFF",
    ],
    deps = [
        "dev-libs//glib:glib",
        "dev-libs//compression/zstd:zstd",
    ],
    visibility = ["PUBLIC"],
)
