load("@root//defs:package_defs.bzl", "cmake_package", "autotools_package")
load("@root//defs:use_flags.bzl", "set_use_flags")

# openvdb - Sparse volume data structure and tools
cmake_package(
    name = "openvdb",
    version = "11.0.0",
    iuse = [
        "",
        "1))-compat",
        "2))-compat",
        "abi$((OPENVDB_ABI",
        "abi${OPENVDB_ABI}-compat",
        "alembic",
        "ax",
        "blosc",
        "cuda",
        "examples",
        "jpeg",
        "nanovdb",
        "numpy",
        "openexr",
        "pdal",
        "png",
        "python",
        "static-libs",
        "utils",
        "zlib",
    ],
    use_cmake = {
        "": "-DENABLE_=ON",
        "-": "-DENABLE_=OFF",
        "-1))-compat": "-DENABLE_1))_COMPAT=OFF",
        "-2))-compat": "-DENABLE_2))_COMPAT=OFF",
        "-abi$((OPENVDB_ABI": "-DENABLE_ABI$((OPENVDB_ABI=OFF",
        "-abi${OPENVDB_ABI}-compat": "-DENABLE_ABI${OPENVDB_ABI}_COMPAT=OFF",
        "-alembic": "-DENABLE_ALEMBIC=OFF",
        "-ax": "-DENABLE_AX=OFF",
        "-blosc": "-DENABLE_BLOSC=OFF",
        "-cuda": "-DWITH_CUDA=OFF",
        "-examples": "-DBUILD_EXAMPLES=OFF",
        "-jpeg": "-DENABLE_JPEG=OFF",
        "-nanovdb": "-DENABLE_NANOVDB=OFF",
        "-numpy": "-DENABLE_NUMPY=OFF",
        "-openexr": "-DENABLE_OPENEXR=OFF",
        "-pdal": "-DENABLE_PDAL=OFF",
        "-png": "-DENABLE_PNG=OFF",
        "-python": "-DENABLE_PYTHON=OFF",
        "-static-libs": "-DBUILD_STATIC_LIBS=OFF",
        "-utils": "-DENABLE_UTILS=OFF",
        "-zlib": "-DENABLE_ZLIB=OFF",
        "1))-compat": "-DENABLE_1))_COMPAT=ON",
        "2))-compat": "-DENABLE_2))_COMPAT=ON",
        "abi$((OPENVDB_ABI": "-DENABLE_ABI$((OPENVDB_ABI=ON",
        "abi${OPENVDB_ABI}-compat": "-DENABLE_ABI${OPENVDB_ABI}_COMPAT=ON",
        "alembic": "-DENABLE_ALEMBIC=ON",
        "ax": "-DENABLE_AX=ON",
        "blosc": "-DENABLE_BLOSC=ON",
        "cuda": "-DWITH_CUDA=ON",
        "examples": "-DBUILD_EXAMPLES=ON",
        "jpeg": "-DENABLE_JPEG=ON",
        "nanovdb": "-DENABLE_NANOVDB=ON",
        "numpy": "-DENABLE_NUMPY=ON",
        "openexr": "-DENABLE_OPENEXR=ON",
        "pdal": "-DENABLE_PDAL=ON",
        "png": "-DENABLE_PNG=ON",
        "python": "-DENABLE_PYTHON=ON",
        "static-libs": "-DBUILD_STATIC_LIBS=ON",
        "utils": "-DENABLE_UTILS=ON",
        "zlib": "-DENABLE_ZLIB=ON",
    },
    src_uri = "https://github.com/AcademySoftwareFoundation/openvdb/archive/v11.0.0.tar.gz",
    sha256 = "6314ff1db057ea90050763e7b7d7ed86d8224fcd42a82cdbb9c515e001b96c74",
    signature_required = False,
    description = "Sparse volume data structure and tools",
    homepage = "https://www.openvdb.org/",
    license = "MPL-2.0",
    cmake_args = [
        "-DBUILD_SHARED_LIBS=ON",
        "-DOPENVDB_BUILD_BINARIES=OFF",
        "-DOPENVDB_BUILD_PYTHON_MODULE=OFF",
        "-DUSE_BLOSC=OFF",
    ],
    deps = [
        "//packages/linux/dev-libs/boost:boost",
    ],
    visibility = ["PUBLIC"],
)
