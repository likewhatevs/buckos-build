load("//defs:package_defs.bzl", "download_source", "autotools_package")
load("//defs:use_flags.bzl", "set_use_flags", "use_dep")

# ICU - International Components for Unicode
download_source(
    name = "icu-src",
    src_uri = "https://github.com/unicode-org/icu/releases/download/release-74-2/icu4c-74_2-src.tgz",
    sha256 = "68db082212a96d6f53e35d60f47d38b962e9f9d207a74cfac78029ae8ff5e08c",
    signature_required = False,
)

autotools_package(
    name = "icu",
    source = ":icu-src",
    version = "74.2",
    description = "International Components for Unicode library",
    homepage = "https://icu.unicode.org/",
    license = "ICU",
    iuse = ["debug", "examples", "static-libs"],
    use_defaults = [],
    src_subdir = "source",
    configure_args = [
        "--enable-shared",
        "--disable-samples",
        "--disable-tests",
    ],
    use_configure = {
        "-debug": "--disable-debug --enable-release",
        "-examples": "--disable-examples",
        "-static-libs": "--disable-static",
        "debug": "--enable-debug --disable-release",
        "examples": "--enable-examples",
        "static-libs": "--enable-static",
    },
    visibility = ["PUBLIC"],
)
