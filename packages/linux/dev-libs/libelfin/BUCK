load("@root//defs:package_defs.bzl", "autotools_package")

autotools_package(
    name = "libelfin",
    version = "0.3",
    src_uri = "https://github.com/aclements/libelfin/archive/v0.3.tar.gz",
    sha256 = "c338942b967582922b3514b54b93175ca9051a9668db92dd8ef619824d443ac7",
    src_configure = "true",
    src_compile = """
make -C elf PREFIX=/usr -j$(nproc)
make -C dwarf PREFIX=/usr -j$(nproc)
""",
    src_install = """
make -C elf PREFIX=/usr DESTDIR="$DESTDIR" install
make -C dwarf PREFIX=/usr DESTDIR="$DESTDIR" install
""",
    deps = [
        "lang//python:python",
    ],
    visibility = ["PUBLIC"],
)
