load("//defs:package_defs.bzl", "cmake_package")

# hapPLY - Header-only C++ PLY file format reader/writer

cmake_package(
    name = "happly",
    version = "2019.07.20",
    src_uri = "https://github.com/nmwsharp/happly/archive/refs/heads/master.tar.gz",
    sha256 = "20c0f42059699004f7d9c326628b5dfe346ece9bc049263ccc945c54a68f1b56",
    description = "Header-only C++ reader/writer for the PLY file format",
    homepage = "https://github.com/nmwsharp/happly",
    license = "MIT",
    deps = [],
    pre_configure = """
cat > CMakeLists.txt << 'EOF'
cmake_minimum_required(VERSION 3.10)
project(happly VERSION 2.0.0 LANGUAGES CXX)

add_library(happly INTERFACE)
target_include_directories(happly INTERFACE
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
    $<INSTALL_INTERFACE:include>
)

install(FILES happly.h DESTINATION include)
install(TARGETS happly EXPORT happlyTargets)
install(EXPORT happlyTargets DESTINATION lib/cmake/happly)
EOF
""",
    cmake_args = [
        "-DCMAKE_BUILD_TYPE=Release",
    ],
    visibility = ["PUBLIC"],
)
