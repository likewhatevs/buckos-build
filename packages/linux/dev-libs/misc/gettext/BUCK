load("//defs:package.bzl", "package")

# gettext - GNU internationalization utilities
package(
    build_rule = "autotools",
    name = "gettext",
    url = "https://mirrors.kernel.org/gnu/gettext/gettext-0.26.tar.xz",

    sha256 = "d1fb86e260cfe7da6031f94d2e44c0da55903dbae0a2fa0fae78c91ae1b56f00",
    use_configure = {
        "acl": ("--enable-acl", "--disable-acl"),
        "cxx": ("--enable-cxx", "--disable-cxx"),
        "emacs": ("--enable-emacs", "--disable-emacs"),
        "git": ("--enable-git", "--disable-git"),
        "java": ("--enable-java", "--disable-java"),
        "ncurses": ("--with-ncurses", "--without-ncurses"),
        "nls": ("--enable-nls", "--disable-nls"),
        "openmp": ("--enable-openmp", "--disable-openmp"),
        "static-libs": ("--enable-static", "--disable-static"),
        "xattr": ("--enable-xattr", "--disable-xattr"),
    },
    version = "0.26",
    description = "GNU internationalization and localization utilities",
    homepage = "https://www.gnu.org/software/gettext",
    license = "GPL-3+",
    configure_args = [
        "--disable-java",
        "--disable-csharp",
        "--disable-openmp",
        "--without-emacs",
        "--disable-selinux",
        # Disable C++ libasprintf - causes stdlib.h not found issue in cross-compilation
        "--disable-cxx",
        "--disable-libasprintf",
        # Prevent libtool from embedding absolute build-time paths in RPATH
        "--disable-rpath",
    ],
    deps = [
        "//packages/linux/system/terminal/ncurses:ncurses",
    ],
)
