load("@root//defs:package_defs.bzl", "autotools_package")

# liquid-dsp - Software-defined radio digital signal processing library
# Provides modulation, error correction, filtering, and more
autotools_package(
    name = "liquid-dsp",
    bdepend = [
        "dev-tools//build-systems/autoconf:autoconf",
        "dev-tools//build-systems/automake:automake",
        "dev-tools//build-systems/libtool:libtool",
    ],
    src_prepare = """
autoreconf -fi
""",
    version = "1.6.0",
    src_uri = "https://github.com/jgaeddert/liquid-dsp/archive/refs/tags/v1.6.0.tar.gz",
    sha256 = "6ee6a5dfb48e047b118cf613c0b9f43e34356a5667a77a72a55371d2c8c53bf5",
    configure_args = [
        "--enable-shared",
        "--disable-static",
    ],
    iuse = ["fftw", "static-libs"],
    use_defaults = [],
    use_configure = {
        "-fftw": "--disable-fftoverride",
        "-static-libs": "--disable-static",
        "fftw": "--enable-fftoverride",
        "static-libs": "--enable-static",
    },
    use_deps = {
        "fftw": ["dev-libs//fftw:fftw"],
    },
    description = "Software-defined radio digital signal processing library",
    homepage = "https://liquidsdr.org/",
    license = "MIT",
    maintainers = ["buckos"],
    visibility = ["PUBLIC"],
)
