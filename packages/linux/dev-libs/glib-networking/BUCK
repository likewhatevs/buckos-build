load("@root//defs:package_defs.bzl", "meson_package")

meson_package(
    name = "glib-networking",
    version = "2.72.2",
    iuse = ["gnome", "libproxy", "ssl"],
    use_configure = {
        "-gnome": "--disable-gnome",
        "-libproxy": "--disable-libproxy",
        "-ssl": "--disable-ssl",
        "gnome": "--enable-gnome",
        "libproxy": "--enable-libproxy",
        "ssl": "--enable-ssl",
    },
    src_uri = "https://download.gnome.org/sources/glib-networking/2.72/glib-networking-{version}.tar.xz",
    sha256 = "cd2a084c7bb91d78e849fb55d40e472f6d8f6862cddc9f12c39149359ba18268",
    deps = [
        "dev-libs//glib:glib",
        "system//libs/crypto/gnutls:gnutls",
    ],
    meson_args = [
        "-Dgnutls=enabled",
        "-Dopenssl=disabled",
        "-Dlibproxy=disabled",
        "-Dgnome_proxy=disabled",
        "-Dinstalled_tests=false",
    ],
)
