load("//defs:package.bzl", "package")

package(
    build_rule = "cmake",
    name = "metis",
    version = "5.2.1",
    use_configure = {
        "double-precision": ("-DENABLE_DOUBLE_PRECISION=ON", "-DENABLE_DOUBLE_PRECISION=OFF"),
        "examples": ("-DBUILD_EXAMPLES=ON", "-DBUILD_EXAMPLES=OFF"),
        "int64": ("-DENABLE_INT64=ON", "-DENABLE_INT64=OFF"),
        "openmp": ("-DWITH_OPENMP=ON", "-DWITH_OPENMP=OFF"),
    },
    url = "https://github.com/KarypisLab/METIS/archive/refs/tags/v5.2.1.tar.gz",
    sha256 = "1a4665b2cd07edc2f734e30d7460afb19c1217c2547c2ac7bf6e1848d50aff7a",
    description = "Graph partitioning and fill-reducing matrix ordering library",
    homepage = "http://glaros.dtc.umn.edu/gkhome/metis/metis/overview",
    license = "Apache-2.0",
    deps = [],
    configure_args = [
        "-DCMAKE_BUILD_TYPE=Release",
        "-DBUILD_SHARED_LIBS=ON",
        "-DGKLIB_PATH=GKlib",
    ],
)
