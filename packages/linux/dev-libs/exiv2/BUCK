load("//defs:package_defs.bzl", "cmake_package", "autotools_package")
load("//defs:use_flags.bzl", "set_use_flags")

# exiv2 - Image metadata library and tools
cmake_package(
    name = "exiv2",
    version = "0.28.7",
    iuse = [
        "bmff",
        "examples",
        "jpegxl",
        "nls",
        "png",
        "webready",
        "xmp",
    ],
    use_cmake = {
        "-bmff": "-DENABLE_BMFF=OFF",
        "-examples": "-DBUILD_EXAMPLES=OFF",
        "-jpegxl": "-DENABLE_JPEGXL=OFF",
        "-nls": "-DENABLE_NLS=OFF",
        "-png": "-DENABLE_PNG=OFF",
        "-webready": "-DENABLE_WEBREADY=OFF",
        "-xmp": "-DENABLE_XMP=OFF",
        "bmff": "-DENABLE_BMFF=ON",
        "examples": "-DBUILD_EXAMPLES=ON",
        "jpegxl": "-DENABLE_JPEGXL=ON",
        "nls": "-DENABLE_NLS=ON",
        "png": "-DENABLE_PNG=ON",
        "webready": "-DENABLE_WEBREADY=ON",
        "xmp": "-DENABLE_XMP=ON",
    },
    src_uri = "https://github.com/Exiv2/exiv2/archive/refs/tags/v0.28.7.tar.gz",
    sha256 = "5e292b02614dbc0cee40fe1116db2f42f63ef6b2ba430c77b614e17b8d61a638",
    signature_required = False,
    description = "Image metadata library and tools",
    homepage = "https://www.exiv2.org/",
    license = "GPL-2.0-or-later",
    cmake_args = [
        "-DBUILD_SHARED_LIBS=ON",
        "-DEXIV2_ENABLE_NLS=ON",
        "-DEXIV2_BUILD_SAMPLES=OFF",
    ],
    deps = [],
    visibility = ["PUBLIC"],
)
