load("//defs:package.bzl", "package")

# libsecret - GObject library for accessing Secret Service API
# USE flags: introspection, vala, gtk-doc
# Default: none

package(
    build_rule = "meson",
    name = "libsecret",
    version = "0.21.4",
    use_configure = {
        "crypt": ("--enable-crypt", "--disable-crypt"),
        "gcrypt": ("--with-gcrypt", "--without-gcrypt"),
        "gnutls": ("--with-gnutls", "--without-gnutls"),
        "gtk-doc": ("--enable-gtk-doc", "--disable-gtk-doc"),
        "introspection": ("--enable-introspection", "--disable-introspection"),
        "pam": ("--enable-pam", "--disable-pam"),
        "test-rust": ("--enable-test-rust", "--disable-test-rust"),
        "tpm": ("--enable-tpm", "--disable-tpm"),
        "vala": ("--enable-vala", "--disable-vala"),
    },
    url = "https://download.gnome.org/sources/libsecret/0.21/libsecret-0.21.4.tar.xz",
    sha256 = "163d08d783be6d4ab9a979ceb5a4fecbc1d9660d3c34168c581301cd53912b20",
    description = "GObject based library for accessing the Secret Service API",
    homepage = "https://wiki.gnome.org/Projects/Libsecret",
    license = "LGPL-2.1+",
    configure_args = [
        "-Dmanpage=false",
        "-Dvapi=false",
        "-Dgtk_doc=false",
        "-Dintrospection=false",
    ],
    deps = [
        "//packages/linux/dev-libs/glib:glib",
        "//packages/linux/system/libs/crypto/libgcrypt:libgcrypt",
    ],
)
