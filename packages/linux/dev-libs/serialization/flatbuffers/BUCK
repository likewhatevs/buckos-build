load("//defs:package_defs.bzl", "cmake_package")

# FlatBuffers - Efficient cross platform serialization library

cmake_package(
    name = "flatbuffers",
    version = "24.3.25",
    src_uri = "https://github.com/google/flatbuffers/archive/refs/tags/v24.3.25.tar.gz",
    sha256 = "4157c5cacdb59737c5d627e47ac26b140e9ee28b1102f812b36068aab728c1ed",
    description = "Memory efficient serialization library for C++",
    homepage = "https://flatbuffers.dev/",
    license = "Apache-2.0",
    iuse = ["python", "static-libs"],
    use_cmake = {
        "-static-libs": "-DBUILD_STATIC_LIBS=OFF",
        "static-libs": "-DBUILD_STATIC_LIBS=ON",
    },
    deps = [],
    use_deps = {
        "python": ["//packages/linux/lang/python:python"],
    },
    cmake_args = [
        "-DCMAKE_BUILD_TYPE=Release",
        "-DFLATBUFFERS_BUILD_TESTS=OFF",
        "-DFLATBUFFERS_BUILD_SHAREDLIB=ON",
        "-DFLATBUFFERS_BUILD_FLATLIB=ON",
        "-DFLATBUFFERS_BUILD_FLATC=ON",
    ],
    visibility = ["PUBLIC"],
)
