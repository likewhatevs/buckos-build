# Linux Kernel Packages for BuckOS
#
# The BuckOS kernel system provides:
# - Decomposed build rules (config, headers, build, btf, modules_install)
# - Modular configuration fragments with USE flag integration via select()
# - Pre-built kernel variants for different use cases
# - Easy extension for custom kernels
#
# Main packages:
#   buckos-kernel         - Default kernel with broad hardware support
#   buckos-kernel-minimal - Smaller footprint, essential drivers only
#   buckos-kernel-server  - Server-optimized configuration
#   buckos-kernel-vm      - Optimized for VM guests
#
# Decomposed targets:
#   linux-headers         - Installed kernel headers (glibc/musl depend on this)
#   linux-btf             - vmlinux.h for BPF CO-RE programs
#   linux-modules         - Installed modules with out-of-tree merging

# Export legacy kernel config for backward compatibility
export_file(
    name = "kernel.config",
    src = "kernel.config",
    default_target_platform = "//platforms:linux-target",
    visibility = ["PUBLIC"],
)

# Convenience alias for the default BuckOS kernel
alias(
    name = "default",
    actual = "//packages/linux/kernel/buckos-kernel:buckos-kernel",
    visibility = ["PUBLIC"],
)

# Alias for linux-headers (glibc/musl/BPF depend on this)
alias(
    name = "linux-headers",
    actual = "//packages/linux/kernel/buckos-kernel:linux-headers",
    visibility = ["PUBLIC"],
)

# Alias for BTF headers (sched_ext schedulers, BPF CO-RE programs)
alias(
    name = "linux-btf",
    actual = "//packages/linux/kernel/buckos-kernel:linux-btf",
    visibility = ["PUBLIC"],
)

# Alias for installed modules
alias(
    name = "linux-modules",
    actual = "//packages/linux/kernel/buckos-kernel:linux-modules",
    visibility = ["PUBLIC"],
)
