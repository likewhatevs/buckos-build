load("//defs:package.bzl", "package")

# cloc - Count lines of code
package(
    build_rule = "binary",
    name = "cloc",
    version = "2.06",
    url = "https://github.com/AlDanial/cloc/archive/refs/tags/v2.06.tar.gz",
    sha256 = "10d78427fda66aaa10ec733adb03d910c49376fe9068aacebb17aa657a7a3a05",
    description = "Count blank lines, comment lines, and physical lines of source code",
    homepage = "https://github.com/AlDanial/cloc",
    license = "GPL-2.0",
    install_script = """
        cd "$SRCS"
        # cloc is a single Perl script, just install it
        install -Dm755 cloc "$OUT/usr/bin/cloc"
        # Install man page if it exists
        if [ -f cloc.1 ]; then
            install -Dm644 cloc.1 "$OUT/usr/share/man/man1/cloc.1"
        fi
    """,
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)
