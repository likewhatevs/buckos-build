load("@root//defs:package_defs.bzl", "download_source", "autotools_package")
load("@root//defs:use_flags.bzl", "set_use_flags")

autotools_package(
    name = "global",
    # GNU release tarball includes pre-generated configure script
    bdepend = [],
    src_prepare = "",
    version = "6.6.12",
    src_uri = "https://mirrors.kernel.org/gnu/global/global-6.6.12.tar.gz",
    sha256 = "542a5b06840e14eca548b4bb60b44c0adcf01024e68eb362f8bf716007885901",
    signature_sha256 = "28c5ad17f5cd62682e0b852f5ba660609777b7400c8fb2e50f0d7cc5b3ac7973",
    signature_required=False,
    description = "GNU GLOBAL source code tagging system",
    homepage = "https://www.gnu.org/software/global/",
    license = "GPL-3+",

    iuse = ["emacs", "python", "sqlite"],
    use_defaults = [],
    use_configure = {
        "-emacs": "--disable-emacs",
        "-python": "--without-python",
        "-sqlite": "--without-sqlite3",
        "emacs": "--enable-emacs",
        "python": "--with-python",
        "sqlite": "--with-sqlite3",
    },
    configure_args = [
        "--with-exuberant-ctags=/usr/bin/ctags",
    ],

    visibility = ["PUBLIC"],
)
