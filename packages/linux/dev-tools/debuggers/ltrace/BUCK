load("//defs:package.bzl", "package")

package(
    build_rule = "autotools",
    name = "ltrace",
    deps = [
        "//packages/linux/dev-tools/build-systems/autoconf:autoconf",
        "//packages/linux/dev-tools/build-systems/automake:automake",
        "//packages/linux/dev-tools/build-systems/libtool:libtool",
    ],
    pre_configure_cmds = ["""
mkdir -p config/m4 config/autoconf
autoreconf -fi
"""],
    version = "0.7.91_pre20221216",
    url = "https://gitlab.com/cespedes/ltrace/-/archive/5cffc0d2134f697fbac8627ec5b5f0085cd47c8a.tar.bz2",
    sha256 = "52200d6262a8de40e494301f6af015da2b34fe69d85b55f6223464c03a999800",
    description = "Library call tracer",
    homepage = "https://gitlab.com/cespedes/ltrace",
    license = "GPL-2+",

    # USE flags this package supports

    # Default USE flags

    # Conditional configure arguments
    use_configure = {
        "debug": ("--enable-debug", "--disable-debug"),
        "elfutils": ("--enable-elfutils", "--disable-elfutils"),
        "selinux": ("--enable-selinux", "--disable-selinux"),
        "unwind": ("--with-libunwind", "--without-libunwind"),
    },

    # Base configure arguments (always applied)
    configure_args = [
        "--disable-werror",
    ],

    visibility = ["PUBLIC"],
)
