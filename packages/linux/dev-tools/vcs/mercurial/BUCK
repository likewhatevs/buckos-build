load("//defs:package.bzl", "package")

package(
    build_rule = "autotools",
    name = "mercurial",
    version = "6.6",
    url = "https://www.mercurial-scm.org/release/mercurial-6.6.tar.gz",
    sha256 = "6bfd71cba0df3b18de424216b30e2a541cca6e0104853d3334be80a2ab09a4ad",
    description = "Scalable distributed SCM tool",
    homepage = "https://www.mercurial-scm.org/",
    license = "GPL-2+",

    # USE flags this package supports

    # Default USE flags

    # Conditional configure arguments
    use_configure = {
        "chg": ("--enable-chg", "--disable-chg"),
        "emacs": ("--enable-emacs", "--disable-emacs"),
        "gpg": ("--enable-gpg", "--disable-gpg"),
        "rust": "HGWITHRUSTEXT=cpython",
        "tk": ("--enable-tk", "--disable-tk"),
    },

    make_args = [
        "PREFIX=/usr",
        "PYTHON=/usr/bin/python3",
    ],
    deps = [
        "//packages/linux/lang/python:python",
    ],
)
