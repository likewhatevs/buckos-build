load("//defs:package.bzl", "package")

# =============================================================================
# slibtool - A strong libtool implementation, written in C
# =============================================================================
# A faster, simpler libtool alternative. Drop-in replacement that can
# significantly speed up builds that use libtool.

package(
    build_rule = "binary",
    name = "slibtool",
    version = "0.7.4",
    url = "https://mirror.buckos.org/s/slibtool-0.7.4.tar.xz",
    sha256 = "FIXME",
    description = "A strong libtool implementation, written in C",
    homepage = "https://git.foss21.org/slibtool",
    license = "MIT",
    install_script = """
        cd $SRCS
        ./configure \
            --compiler="${CC:-gcc}" \
            --host="${CHOST:-$(gcc -dumpmachine)}" \
            --prefix=/usr \
            --libdir=/usr/lib64
        make -j${MAKEOPTS:-$(nproc)}
        make DESTDIR="$OUT" install
    """,
    deps = [
        "//packages/linux/dev-tools/build-systems/m4:m4",
    ],
)
