load("//defs:package_defs.bzl", "download_source", "autotools_package")

autotools_package(
    name = "latexml",
    src_uri = "https://github.com/brucemiller/LaTeXML/archive/refs/tags/v0.8.8.tar.gz",

    sha256 = "8a26ee4b5cc37db0c5733131187e2821283004e77e9edb27f4f37b76c6077b52",
    version = "0.8.8",
    description = "LaTeX to XML/HTML/MathML Converter",
    homepage = "https://dlmf.nist.gov/LaTeXML/",
    license = "CC0-1.0",
    pre_configure = """
        perl Makefile.PL PREFIX="${EPREFIX:-/usr}" INSTALLDIRS=vendor NOMKTEXLSR=1
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        "//packages/linux/lang/perl/xml:xml-libxml",
        "//packages/linux/lang/perl/xml:xml-libxslt",
        "//packages/linux/lang/perl/data:json-xs",
        "//packages/linux/lang/perl/network:lwp",
        "//packages/linux/lang/perl/data:archive-zip",
        "//packages/linux/lang/perl/data:image-size",
        "//packages/linux/lang/perl/data:text-unidecode",
        "//packages/linux/lang/perl/cli:file-which",
        "//packages/linux/lang/perl/parsers:parse-recdescent",
        "//packages/linux/lang/perl/network:uri",
    ],
    visibility = ["PUBLIC"],
)
