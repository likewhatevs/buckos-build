load("//defs:package_defs.bzl", "cargo_package")

cargo_package(
    name = "codex",
    version = "0.0.0-6eeaf46",
    src_uri = "https://github.com/openai/codex/archive/6eeaf46ac136f6ea0352641a5daea5006195e09f.tar.gz",
    sha256 = "89f014a97c46106aee35402a37aa9eb34fd0388e4ed9aea9ee0b2eb2f59a6d6d",
    description = "Coding agent CLI from OpenAI that runs locally",
    homepage = "https://github.com/openai/codex",
    license = "Apache-2.0",
    # The codex-cli package produces a binary named 'codex'
    bins = ["codex"],
    cargo_args = [
        "--manifest-path=codex-rs/Cargo.toml",
        "--package=codex-cli",
    ],
    deps = [
        "//packages/linux/system/libs/crypto/openssl:openssl",
    ],
    visibility = ["PUBLIC"],
)
