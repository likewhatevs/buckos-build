load("@root//defs:package_defs.bzl", "python_package")

python_package(
    name = "llama-factory",
    version = "0.9.4",
    src_uri = "https://github.com/hiyouga/LLaMA-Factory/archive/refs/tags/v0.9.4.tar.gz",
    sha256 = "2ce772945da1c7c28964e23d8bae429222749a4e9df47191e2159e3f72f638fd",
    signature_required = False,
    description = "Unified Efficient Fine-Tuning of 100+ LLMs",
    homepage = "https://github.com/hiyouga/LLaMA-Factory",
    license = "Apache-2.0",
    deps = [
        "//packages/linux/ai/ml-frameworks/transformers:transformers",
        "//packages/linux/ai/ml-frameworks/datasets:datasets",
        "//packages/linux/ai/ml-frameworks/accelerate:accelerate",
        "//packages/linux/ai/ml-frameworks/peft:peft",
        "//packages/linux/ai/ml-frameworks/trl:trl",
        "//packages/linux/dev-libs/python/gradio:gradio",
        "//packages/linux/dev-libs/python/matplotlib:matplotlib",
        "//packages/linux/dev-libs/python/tyro:tyro",
        "//packages/linux/dev-libs/python/einops:einops",
        "//packages/linux/dev-libs/python/numpy:numpy",
        "//packages/linux/dev-libs/python/pandas:pandas",
        "//packages/linux/dev-libs/python/scipy:scipy",
        "//packages/linux/dev-libs/python/sentencepiece:sentencepiece",
        "//packages/linux/dev-libs/python/tiktoken:tiktoken",
        "//packages/linux/dev-libs/python/modelscope:modelscope",
        "//packages/linux/dev-libs/python/safetensors:safetensors",
        "//packages/linux/dev-libs/python/fire:fire",
        "//packages/linux/dev-libs/python/omegaconf:omegaconf",
        "//packages/linux/dev-libs/python/packaging:packaging",
        "//packages/linux/dev-libs/serialization/protobuf:protobuf",
        "//packages/linux/dev-libs/python/pyyaml:pyyaml",
        "//packages/linux/dev-libs/python/pydantic:pydantic",
        "//packages/linux/dev-libs/python/uvicorn:uvicorn",
        "//packages/linux/dev-libs/python/fastapi:fastapi",
        "//packages/linux/dev-libs/python/sse-starlette:sse-starlette",
        "//packages/linux/media/libraries/pyav:pyav",
        "//packages/linux/audio/libraries/librosa:librosa",
    ],
    visibility = ["PUBLIC"],
)
